
.. _rest_scheduler:

Scheduler Services
==================

These services provide access to information about the scheduler.
There should be one and only one scheduler entry in the database and it is used to store global data like paused status.

.. _rest_scheduler_details:

+-------------------------------------------------------------------------------------------------------------------------+
| **Get Scheduler**                                                                                                       |
+=========================================================================================================================+
| Returns data for the scheduler                                                                                          |
+-------------------------------------------------------------------------------------------------------------------------+
| **GET** /scheduler/                                                                                                     |
+--------------------+-------------------+--------------------------------------------------------------------------------+
| **Successful Response**                                                                                                 |
+--------------------+----------------------------------------------------------------------------------------------------+
| **Status**         | 200 OK                                                                                             |
+--------------------+----------------------------------------------------------------------------------------------------+
| **Content Type**   | *application/json*                                                                                 |
+--------------------+----------------------------------------------------------------------------------------------------+
| **JSON Fields**                                                                                                         |
+--------------------+-------------------+--------------------------------------------------------------------------------+
| is_paused          | Boolean           | True if the scheduler is paused. This functions like individually pausing      |
|                    |                   | all nodes but maintains separated state so toggling this back to unpaused      |
|                    |                   | results in the previous individual node pause state.                           |
+--------------------+-------------------+--------------------------------------------------------------------------------+
| .. code-block:: javascript                                                                                              |
|                                                                                                                         |
|   {                                                                                                                     |
|       "is_paused": False,                                                                                               |
|   }                                                                                                                     |
+-------------------------------------------------------------------------------------------------------------------------+
| **Error Responses**                                                                                                     |
+--------------------+----------------------------------------------------------------------------------------------------+
| **Status**         | 500 INTERNAL SERVER ERROR                                                                          |
+--------------------+----------------------------------------------------------------------------------------------------+
| **Content Type**   | *text/plain*                                                                                       |
+--------------------+----------------------------------------------------------------------------------------------------+
| An internal error occurred, often this will indicate a missing database entry.                                          |
+--------------------+----------------------------------------------------------------------------------------------------+

.. _rest_scheduler_update:

+-------------------------------------------------------------------------------------------------------------------------+
| **Update Scheduler**                                                                                                    |
+=========================================================================================================================+
| Update one or more fields for the scheduler.                                                                            |
+-------------------------------------------------------------------------------------------------------------------------+
| **PATCH** /scheduler/                                                                                                   |
|           All fields are optional and additional fields are not tolerated.                                              |
+--------------------+----------------------------------------------------------------------------------------------------+
| **Content Type**   | *application/json*                                                                                 |
+--------------------+----------------------------------------------------------------------------------------------------+
| **JSON Fields**                                                                                                         |
+--------------------+-------------------+--------------------------------------------------------------------------------+
| is_paused          | Boolean           | (Optional) True if the scheduler should be paused, false to resume.            |
+--------------------+-------------------+--------------------------------------------------------------------------------+
| **Successful Response**                                                                                                 |
+--------------------+----------------------------------------------------------------------------------------------------+
| **Status**         | 201 CREATED                                                                                        |
+--------------------+----------------------------------------------------------------------------------------------------+
| **Location**       | URL pointing to the scheduler information (should be the same as the request URL)                  |
+--------------------+----------------------------------------------------------------------------------------------------+
| **Content Type**   | *application/json*                                                                                 |
+--------------------+----------------------------------------------------------------------------------------------------+
| Response format is identical to GET but contains the updated data.                                                      |
+--------------------+----------------------------------------------------------------------------------------------------+
| **JSON Fields**                                                                                                         |
+--------------------+-------------------+--------------------------------------------------------------------------------+
| is_paused          | Boolean           | True if the scheduler is paused. This functions like individually pausing      |
|                    |                   | all nodes but maintains separated state so toggling this back to unpaused      |
|                    |                   | results in the previous individual node pause state.                           |
+--------------------+-------------------+--------------------------------------------------------------------------------+
| **Error Responses**                                                                                                     |
+--------------------+----------------------------------------------------------------------------------------------------+
| **Status**         | 400 BAD REQUEST                                                                                    |
+--------------------+----------------------------------------------------------------------------------------------------+
| **Content Type**   | *text/plain*                                                                                       |
+--------------------+----------------------------------------------------------------------------------------------------+
| Unexpected fields were specified. An error message lists them. Or no fields were specified.                             |
+--------------------+----------------------------------------------------------------------------------------------------+
| **Status**         | 500 INTERNAL SERVER ERROR                                                                          |
+--------------------+----------------------------------------------------------------------------------------------------+
| **Content Type**   | *text/plain*                                                                                       |
+--------------------+----------------------------------------------------------------------------------------------------+
| An internal error occurred, often this will indicate a missing database entry.                                          |
+--------------------+----------------------------------------------------------------------------------------------------+
